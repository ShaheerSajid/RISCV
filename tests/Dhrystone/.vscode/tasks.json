{
	"version": "2.0.0",
	"tasks": [
		{
			"type": "shell",
			"label": "Compile",
			"command": "/opt/riscv64/bin/riscv64-unknown-elf-gcc",
			"args": [
                "-c",
                "${file}",
                "${fileDirname}/dhry_2.c",
    
                
				"-O3",
				"-mabi=ilp32",
                "-march=rv32im",
				//"--no-inline",
				//"-mno-fdiv",
				"-mno-div",
				"-DMSC_CLOCK",
				"-DNOENUM",
				//"-nostdlib",
			 	"-finline-functions",
				"-funroll-loops",
				"--param",
				"max-inline-insns-auto=20",
				//"-DPREALLOCATE=1",
				//"-mcmodel=medany",
				"-static",
				//"-std=gnu99",
				"-ffast-math",
				//"-fno-common",
				"-fno-builtin-printf"

			]
        },
        
        {
			"type": "shell",
			"label": "Link",
			"command": "/opt/riscv64/bin/riscv64-unknown-elf-gcc",
			"args": [
				"-o", 
                "${fileDirname}/${fileBasenameNoExtension}.elf",
                
            
                "${fileDirname}/dhry_1.o",
                "${fileDirname}/dhry_2.o",
				
				 
				"-O3",
				"-mabi=ilp32",
                "-march=rv32im",
				//"--no-inline",
				//"-mno-fdiv",
				"-mno-div",
				"-T",
				"${fileDirname}/link.ld",
				"--specs=nano.specs",
				"-static",
				"-fno-builtin-printf",
				"-nostartfiles",
			]
		},


		{
			"type": "shell",
			"label": "Bin",
			"command": "/opt/riscv64/bin/riscv64-unknown-elf-objcopy",
			"args": [
				"${fileDirname}/${fileBasenameNoExtension}.elf",
				//"--change-addresses",
				//"-0x80000",
				"-O",
				"binary",
				"--gap-fill",
				"0",
				"${fileDirname}/flash/${fileBasenameNoExtension}.bin", 
			]
        },
		{
			"type": "shell",
			"label": "Hex_uni",
			"command": "${fileDirname}/flash/bin2hex_2",
			"args": [
				"${fileDirname}/flash/${fileBasenameNoExtension}.bin",
				"${fileDirname}/flash/${fileBasenameNoExtension}.hex",
			]
		},
		{
			"label": "build",
			"dependsOrder": "sequence",
			"dependsOn": ["Compile","Link","Bin","Hex_uni"],
			"group": {
				"kind": "build",
				"isDefault": true
			}
		}
	]
}